/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={724:t=>{t.exports=class{constructor(){this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,e){if(void 0===t)throw new Error("Point is not defined");let n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}},24:(t,e,n)=>{const r=n(561),o=n(736),i=n(724),a=n(959);t.exports=function(t){let e,n,s=o(),u=new i;return r(t+".co.bin",{responseType:"arraybuffer",progress:function(t){}}).then((function(t){return e=new Int32Array(t),console.log("Downloaded nodes: "+e.length/2),function(t){return console.time("add nodes to graph"),new Promise((e=>{a(t,f,(()=>{console.timeEnd("add nodes to graph"),e()}),{step:2})}))}(e)})).then((function(){return r(t+".gr.bin",{responseType:"arraybuffer",progress:function(t){}}).then(c)})).then((()=>({graph:s,points:e,links:n,graphBBox:u})));function f(t,e,n){let r=Math.floor(e/2),o=n[e+1];s.addNode(r,{x:t,y:o}),u.addPoint(t,o)}function c(t){return n=new Int32Array(t),console.time("add edges to graph"),new Promise((t=>{a(n,l,(()=>{console.timeEnd("add edges to graph"),console.log(s.getLinksCount()+" edges; "+s.getNodesCount()+" nodes."),t()}),{step:2})}))}function l(t,e,n){let r=t-1,o=n[e+1]-1;s.addLink(r,o)}}},561:t=>{t.exports=function(t,e){return e||(e={}),new Promise((function(n,r){var o=new XMLHttpRequest;"function"==typeof e.progress&&o.addEventListener("progress",(function(t){t.lengthComputable&&e.progress({loaded:t.loaded,total:t.total,percent:t.loaded/t.total})}),!1),o.addEventListener("load",(function(){if(200===o.status){var i=o.response;"json"===e.responseType&&"string"==typeof i&&(i=JSON.parse(i)),n(i)}else r(`Unexpected status code ${o.status} when calling ${t}`)}),!1),o.addEventListener("error",(function(){r(`Failed to download ${t}`)}),!1),o.addEventListener("abort",(function(){r(`Cancelled download of ${t}`)}),!1),o.open("GET",t),e.responseType&&(o.responseType=e.responseType),o.send(null)}))}},742:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=u(t),a=i[0],s=i[1],f=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],f[c++]=e>>16&255,f[c++]=e>>8&255,f[c++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,f[c++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,f[c++]=e>>8&255,f[c++]=255&e),f},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,u=r-o;s<u;s+=a)i.push(f(t,s,s+a>u?u:s+a));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},764:(t,e,n)=>{"use strict";const r=n(742),o=n(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=u,e.h2=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return f(t,e,n)}function f(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=s(n);const o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const o=function(t){if(u.isBuffer(t)){const e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?s(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),s(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(o)return r?-1:q(t).length;e=(""+e).toLowerCase(),o=!0}}function m(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return _(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,o){let i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(f(t,i)===f(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(f(t,i+r)!==f(e,r)){n=!1;break}if(n)return i}return-1}function b(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(Z(r))return a;t[n+a]=r}return a}function x(t,e,n,r){return G(q(e,t.length-n),t,n,r)}function E(t,e,n,r){return G(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function I(t,e,n,r){return G(W(e),t,n,r)}function T(t,e,n,r){return G(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(i=u));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return f(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(H(e,Uint8Array))o+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?N(this,0,t):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,o){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),f=this.slice(r,o),c=t.slice(e,n);for(let t=0;t<s;++t)if(f[t]!==c[t]){i=f[t],a=c[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return I(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function _(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function B(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function L(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=J[t[r]];return o}function P(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r,o){X(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function F(t,e,n,r,o){X(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function O(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return e=+e,n>>>=0,i||O(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function M(t,e,n,r,i){return e=+e,n>>>=0,i||O(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=K((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=K((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=K((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=K((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=K((function(t,e=0){return k(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=K((function(t,e=0){return F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=K((function(t,e=0){return k(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=K((function(t,e=0){return F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const Y={};function $(t,e,n){Y[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function D(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function X(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new Y.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||j(e,t.length-(n+1))}(r,o,i)}function z(t,e){if("number"!=typeof t)throw new Y.ERR_INVALID_ARG_TYPE(e,"number",t)}function j(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new Y.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new Y.ERR_BUFFER_OUT_OF_BOUNDS;throw new Y.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=D(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=D(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function q(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function K(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},645:(t,e)=>{e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,f=u>>1,c=-7,l=n?o-1:0,h=n?-1:1,d=t[e+l];for(l+=h,i=d&(1<<-c)-1,d>>=-c,c+=s;c>0;i=256*i+t[e+l],l+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=f}return(d?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;t[n+d]=255&a,d+=p,a/=256,f-=8);t[n+d-p]|=128*g}},245:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:o}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var o=e[n],i=0;i<o.length;++i)o[i].callback===r&&o.splice(i,1);return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},736:(t,e,n)=>{t.exports=function(t){if("uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e,n=new Map,f=[],c={},l=0,h=t.multigraph?function(t,e,n){var r=u(t,e),o=c.hasOwnProperty(r);if(o||S(t,e)){o||(c[r]=0);var i="@"+ ++c[r];r=u(t+i,e+i)}return new s(t,e,n,r)}:function(t,e,n){return new s(t,e,n,u(t,e))},d=[],p=_,g=_,m=_,y=_,v={addNode:x,addLink:function(t,e,n){m();var r=E(t)||x(t),o=E(e)||x(e),i=h(t,e,n);return f.push(i),a(r,i),t!==e&&a(o,i),p(i,"add"),y(),i},removeLink:N,removeNode:I,getNode:E,getNodeCount:T,getLinkCount:A,getLinksCount:A,getNodesCount:T,getLinks:function(t){var e=E(t);return e?e.links:null},forEachNode:P,forEachLinkedNode:function(t,e,r){var o=E(t);if(o&&o.links&&"function"==typeof e)return r?function(t,e,r){for(var o=0;o<t.length;++o){var i=t[o];if(i.fromId===e&&r(n.get(i.toId),i))return!0}}(o.links,t,e):function(t,e,r){for(var o=0;o<t.length;++o){var i=t[o],a=i.fromId===e?i.toId:i.fromId;if(r(n.get(a),i))return!0}}(o.links,t,e)},forEachLink:function(t){var e,n;if("function"==typeof t)for(e=0,n=f.length;e<n;++e)t(f[e])},beginUpdate:m,endUpdate:y,clear:function(){m(),P((function(t){I(t.id)})),y()},hasLink:S,hasNode:E,getLink:S};return r(v),e=v.on,v.on=function(){return v.beginUpdate=m=B,v.endUpdate=y=L,p=w,g=b,v.on=e,e.apply(v,arguments)},v;function w(t,e){d.push({link:t,changeType:e})}function b(t,e){d.push({node:t,changeType:e})}function x(t,e){if(void 0===t)throw new Error("Invalid node identifier");m();var r=E(t);return r?(r.data=e,g(r,"update")):(r=new i(t,e),g(r,"add")),n.set(t,r),y(),r}function E(t){return n.get(t)}function I(t){var e=E(t);if(!e)return!1;m();var r=e.links;if(r){e.links=null;for(var o=0;o<r.length;++o)N(r[o])}return n.delete(t),g(e,"remove"),y(),!0}function T(){return n.size}function A(){return f.length}function N(t){if(!t)return!1;var e=o(t,f);if(e<0)return!1;m(),f.splice(e,1);var n=E(t.fromId),r=E(t.toId);return n&&(e=o(t,n.links))>=0&&n.links.splice(e,1),r&&(e=o(t,r.links))>=0&&r.links.splice(e,1),p(t,"remove"),y(),!0}function S(t,e){var n,r=E(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var o=r.links[n];if(o.fromId===t&&o.toId===e)return o}return null}function _(){}function B(){l+=1}function L(){0==(l-=1)&&d.length>0&&(v.fire("changed",d),d.length=0)}function P(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var e=n.values(),r=e.next();!r.done;){if(t(r.value))return!0;r=e.next()}}};var r=n(245);function o(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function i(t,e){this.id=t,this.links=null,this.data=e}function a(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t,e){return t.toString()+"ðŸ‘‰ "+e.toString()}},39:t=>{function e(t,o){if(!(this instanceof e))return new e(t,o);if(Array.isArray(t)||(o=t,t=[]),o=o||{},this.data=t||[],this.length=this.data.length,this.compare=o.compare||r,this.setNodeId=o.setNodeId||n,this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i);if(o.setNodeId)for(i=0;i<this.length;++i)this.setNodeId(this.data[i],i)}function n(){}function r(t,e){return t-e}t.exports=e,e.prototype={push:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},updateItem:function(t){this._down(t),this._up(t)},_up:function(t){for(var e=this.data,n=this.compare,r=this.setNodeId,o=e[t];t>0;){var i=t-1>>1,a=e[i];if(n(o,a)>=0)break;e[t]=a,r(a,t),t=i}e[t]=o,r(o,t)},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,o=e[t],i=this.setNodeId;t<r;){var a=1+(t<<1),s=a+1,u=e[a];if(s<this.length&&n(e[s],u)<0&&(a=s,u=e[s]),n(u,o)>=0)break;e[t]=u,i(u,t),t=a}e[t]=o,i(o,t)}}},394:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,i=e.heuristic;i||(i=a.heuristic);var u=e.distance;u||(u=a.distance);var f=o();return{find:function(e,o){var c=t.getNode(e);if(!c)throw new Error("fromId is not defined in this graph: "+e);var l=t.getNode(o);if(!l)throw new Error("toId is not defined in this graph: "+o);if(c===l)return[c];f.reset();var h=n?function(t,e){if(1===E){if(e.fromId===I.node.id)return A(t,e,I)}else if(2===E&&e.toId===I.node.id)return A(t,e,I)}:function(t,e){return A(t,e,I)},d=new Map,p=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),g=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),m=f.createNewState(c);d.set(e,m),m.fScore=i(c,l),m.distanceToSource=0,p.push(m),m.open=1;var y=f.createNewState(l);y.fScore=i(l,c),y.distanceToSource=0,g.push(y),y.open=2;for(var v,w,b=Number.POSITIVE_INFINITY,x=p,E=1;p.length>0&&g.length>0;){p.length<g.length?(E=1,x=p):(E=2,x=g);var I=x.pop();if(I.closed=!0,!(I.distanceToSource>b)&&(t.forEachLinkedNode(I.node.id,h),v&&w))return T(v,w)}return s;function T(t,e){for(var n=[],r=t;r;)n.push(r.node),r=r.parent;for(var o=e;o;)n.unshift(o.node),o=o.parent;return n}function A(t,e,n){var r,o=d.get(t.id);if(o||(o=f.createNewState(t),d.set(t.id,o)),!o.closed)if((r=o.open)&&r!==E){var a=o.distanceToSource+n.distanceToSource;a<b&&(v=o,w=n,b=a)}else{var s=n.distanceToSource+u(o.node,n.node,e);if(!(s>=o.distanceToSource)){var h=1===E?l:c,p=s+i(o.node,h);p>=b||(o.fScore=p,0===o.open&&(x.push(o),x.updateItem(o.heapIndex),o.open=E),o.parent=n,o.distanceToSource=s)}}}}}};var r=n(39),o=n(492),i=n(276),a=n(100),s=a.NO_PATH;t.exports.l2=i.l2,t.exports.l1=i.l1},5:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,i=e.heuristic;i||(i=a.heuristic);var f=e.distance;f||(f=a.distance);var c=o();return{find:function(e,o){var l=t.getNode(e);if(!l)throw new Error("fromId is not defined in this graph: "+e);var h=t.getNode(o);if(!h)throw new Error("toId is not defined in this graph: "+o);c.reset();var d,p,g,m=new Map,y=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),v=c.createNewState(l);for(m.set(e,v),v.fScore=i(l,h),v.distanceToSource=0,y.push(v),v.open=1;y.length>0;){if(p=d=y.pop(),g=h,p.node===g)return u(d);d.closed=!0,t.forEachLinkedNode(d.node.id,w,n)}return s;function w(t,e){var n=m.get(t.id);if(n||(n=c.createNewState(t),m.set(t.id,n)),!n.closed){0===n.open&&(y.push(n),n.open=1);var r=d.distanceToSource+f(t,d.node,e);r>=n.distanceToSource||(n.parent=d,n.distanceToSource=r,n.fScore=r+i(n.node,h),y.updateItem(n.heapIndex))}}}}};var r=n(39),o=n(492),i=n(276),a=n(100),s=a.NO_PATH;function u(t){for(var e=[t.node],n=t.parent;n;)e.push(n.node),n=n.parent;return e}t.exports.l2=i.l2,t.exports.l1=i.l1},100:t=>{var e=[];"function"==typeof Object.freeze&&Object.freeze(e),t.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(t,e){return t.fScore-e.fScore},NO_PATH:e,setHeapIndex:function(t,e){t.heapIndex=e},setH1:function(t,e){t.h1=e},setH2:function(t,e){t.h2=e},compareF1Score:function(t,e){return t.f1-e.f1},compareF2Score:function(t,e){return t.f2-e.f2}}},276:t=>{t.exports={l2:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},l1:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.abs(n)+Math.abs(r)}}},492:t=>{function e(t){this.node=t,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var o=n[t];return o?(o.node=r,o.parent=null,o.closed=!1,o.open=0,o.distanceToSource=Number.POSITIVE_INFINITY,o.fScore=Number.POSITIVE_INFINITY,o.heapIndex=-1):(o=new e(r),n[t]=o),t++,o},reset:function(){t=0}}}},238:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,o=e.quitFast,u=e.heuristic;u||(u=i.heuristic);var f=e.distance;f||(f=i.distance);var c=a();return{find:function(e,a){var l=t.getNode(e);if(!l)throw new Error("fromId is not defined in this graph: "+e);var h=t.getNode(a);if(!h)throw new Error("toId is not defined in this graph: "+a);c.reset();var d,p=n?function(t,e){if(e.fromId===I.node.id)return A(t,e)}:A,g=n?function(t,e){if(e.toId===I.node.id)return N(t,e)}:N,m=new Map,y=new r({compare:i.compareF1Score,setNodeId:i.setH1}),v=new r({compare:i.compareF2Score,setNodeId:i.setH2}),w=Number.POSITIVE_INFINITY,b=c.createNewState(l);m.set(e,b),b.g1=0;var x=u(l,h);b.f1=x,y.push(b);var E=c.createNewState(h);m.set(a,E),E.g2=0;var I,T=x;for(E.f2=T,v.push(E);v.length&&y.length&&(y.length<v.length?(I=y.pop()).closed||(I.closed=!0,I.f1<w&&I.g1+T-u(l,I.node)<w&&t.forEachLinkedNode(I.node.id,p),y.length>0&&(x=y.peek().f1)):(I=v.pop()).closed||(I.closed=!0,I.f2<w&&I.g2+x-u(I.node,h)<w&&t.forEachLinkedNode(I.node.id,g),v.length>0&&(T=v.peek().f2)),!o||!d););return function(t){if(!t)return s;for(var e=[t.node],n=t.p1;n;)e.push(n.node),n=n.p1;for(var r=t.p2;r;)e.unshift(r.node),r=r.p2;return e}(d);function A(t,e){var n=m.get(t.id);if(n||(n=c.createNewState(t),m.set(t.id,n)),!n.closed){var r=I.g1+f(I.node,t,e);r<n.g1&&(n.g1=r,n.f1=r+u(n.node,h),n.p1=I,n.h1<0?y.push(n):y.updateItem(n.h1));var o=n.g1+n.g2;o<w&&(w=o,d=n)}}function N(t,e){var n=m.get(t.id);if(n||(n=c.createNewState(t),m.set(t.id,n)),!n.closed){var r=I.g2+f(I.node,t,e);r<n.g2&&(n.g2=r,n.f2=r+u(l,n.node),n.p2=I,n.h2<0?v.push(n):v.updateItem(n.h2));var o=n.g1+n.g2;o<w&&(w=o,d=n)}}}}};var r=n(39),o=n(276),i=n(100),a=n(653),s=i.NO_PATH;t.exports.l2=o.l2,t.exports.l1=o.l1},653:t=>{function e(t){this.node=t,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var o=n[t];return o?(o.node=r,o.p1=null,o.p2=null,o.closed=!1,o.g1=Number.POSITIVE_INFINITY,o.g2=Number.POSITIVE_INFINITY,o.f1=Number.POSITIVE_INFINITY,o.f2=Number.POSITIVE_INFINITY,o.h1=-1,o.h2=-1):(o=new e(r),n[t]=o),t++,o},reset:function(){t=0}}}},901:(t,e,n)=>{t.exports={aStar:n(5),aGreedy:n(394),nba:n(238)}},959:t=>{t.exports=function(t,e,n,r){var o=0,i=0,a=(r=r||{}).step||1,s=r.maxTimeMS||8,u=r.probeElements||5e3;setTimeout((function r(){var f=Math.min(t.length,o+u),c=o,l=new Date;for(c=o;c<f;c+=a)e(t[c],c,t);c<t.length?(i+=new Date-l,o=c,u=Math.round(o*s/i),setTimeout(r,0)):n(t)}),0)}},964:(t,e,n)=>{"use strict";n.r(e),n.d(e,{scene:()=>D,PointCollection:()=>Q,Point:()=>tt,LineCollection:()=>at,WireCollection:()=>ut,LineStripCollection:()=>ct,Element:()=>$,isWebGLEnabled:()=>lt,utils:()=>X});var r,o,i,a=f,s=f,u="";function f(t,e,n){c(t,i,e,n),"DOMMouseScroll"==i&&c(t,"MozMousePixelScroll",e,n)}function c(t,e,n,o){t[r](u+e,"wheel"==i?n:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:t.clientX,clientY:t.clientY,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(){t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){t.stopImmediatePropagation&&t.stopImmediatePropagation()}};return"mousewheel"==i?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,n(e)},o||!1)}function l(t,e,n,r){t[o](u+e,n,r||!1)}!function(t,e){t&&t.addEventListener?(r="addEventListener",o="removeEventListener"):(r="attachEvent",o="detachEvent",u="on"),i=e?"onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document),a.addWheelListener=s,a.removeWheelListener=function(t,e,n){l(t,i,e,n),"DOMMouseScroll"==i&&l(t,"MozMousePixelScroll",e,n)};var h=.1,d="function"==typeof Float32Array;function p(t,e){return 1-3*e+3*t}function g(t,e){return 3*e-6*t}function m(t){return 3*t}function y(t,e,n){return((p(e,n)*t+g(e,n))*t+m(e))*t}function v(t,e,n){return 3*p(e,n)*t*t+2*g(e,n)*t+m(e)}function w(t){return t}var b=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return w;for(var o=d?new Float32Array(11):new Array(11),i=0;i<11;++i)o[i]=y(i*h,t,n);return function(i){return 0===i?0:1===i?1:y(function(e){for(var r=0,i=1;10!==i&&o[i]<=e;++i)r+=h;--i;var a=r+(e-o[i])/(o[i+1]-o[i])*h,s=v(a,t,n);return s>=.001?function(t,e,n,r){for(var o=0;o<4;++o){var i=v(e,n,r);if(0===i)return e;e-=(y(e,n,r)-t)/i}return e}(e,a,t,n):0===s?a:function(t,e,n,r,o){var i,a,s=0;do{(i=y(a=e+(n-e)/2,r,o)-t)>0?n=a:e=a}while(Math.abs(i)>1e-7&&++s<10);return a}(e,r,r+h,t,n)}(i),e,r)}},x={ease:b(.25,.1,.25,1),easeIn:b(.42,0,1,1),easeOut:b(0,0,.58,1),easeInOut:b(.42,0,.58,1),linear:b(0,0,1,1)},E=function(t,e,n){var r=Object.create(null),o=Object.create(null),i="function"==typeof(n=n||{}).easing?n.easing:x[n.easing];i||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),i=x.ease);var a="function"==typeof n.step?n.step:A,s="function"==typeof n.done?n.done:A,u=function(t){if(!t)return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}};if("function"!=typeof t.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof t.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return t}(n.scheduler),f=Object.keys(e);f.forEach((function(n){r[n]=t[n],o[n]=e[n]-t[n]}));var c,l="number"==typeof n.duration?n.duration:400,h=Math.max(1,.06*l),d=0;return c=u.next((function e(){var n=i(d/h);d+=1,function(e){f.forEach((function(n){t[n]=o[n]*e+r[n]}))}(n),d<=h?(c=u.next(e),a(t)):(c=0,setTimeout((function(){s(t)}),0))})),{cancel:function(){u.cancel(c),c=0}}},I=N,T=N();function A(){}function N(){var t=new Set,e=new Set,n=0;return{next:r,cancel:r,clearAll:function(){t.clear(),e.clear(),cancelAnimationFrame(n),n=0}};function r(t){e.add(t),n||(n=requestAnimationFrame(o))}function o(){n=0;var r=e;e=t,(t=r).forEach((function(t){t()})),t.clear()}}E.makeAggregateRaf=I,E.sharedScheduler=T;var S="function"!=typeof Event;function _(t){return t.stopPropagation(),!1}var B,L,P,C=function(){this.x=0,this.y=0,this.scale=1},R={capture:function(t){L=window.document.onselectstart,P=window.document.ondragstart,window.document.onselectstart=_,(B=t).ondragstart=_},release:function(){window.document.onselectstart=L,B&&(B.ondragstart=P)}},k=function(t,e){var n=(e=e||{}).controller;if(n||(t instanceof SVGElement&&(n=function(t){if(!(t instanceof SVGElement))throw new Error("svg element is required for svg.panzoom to work");var e=t.ownerSVGElement;if(!e)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");return e.setAttribute("tabindex",1),{getBBox:function(){var e=t.getBBox();return{left:e.x,top:e.y,width:e.width,height:e.height}},getScreenCTM:function(){return e.getScreenCTM()},getOwner:function(){return e},applyTransform:function(e){t.setAttribute("transform","matrix("+e.scale+" 0 0 "+e.scale+" "+e.x+" "+e.y+")")},initTransform:function(n){var r=t.getScreenCTM();n.x=r.e,n.y=r.f,n.scale=r.a,e.removeAttributeNS(null,"viewBox")}}}(t)),t instanceof HTMLElement&&(n=function(t){if(!(t instanceof HTMLElement))throw new Error("svg element is required for svg.panzoom to work");var e=t.parentElement;if(!e)throw new Error("Do not apply panzoom to the detached DOM element. ");return t.scrollTop=0,e.setAttribute("tabindex",1),{getBBox:function(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}},getOwner:function(){return e},applyTransform:function(e){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}}(t))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var r=n.getOwner(),o={x:0,y:0},i=!1,s=new C;n.initTransform&&n.initTransform(s);var u,f="boolean"==typeof e.realPinch&&e.realPinch,c=e.bounds,l="number"==typeof e.maxZoom?e.maxZoom:Number.POSITIVE_INFINITY,h="number"==typeof e.minZoom?e.minZoom:0,d="number"==typeof e.boundsPadding?e.boundsPadding:.05,p="number"==typeof e.zoomDoubleClickSpeed?e.zoomDoubleClickSpeed:1.75,g=e.beforeWheel||F,m="number"==typeof e.zoomSpeed?e.zoomSpeed:.065;(function(t){var e=typeof t;if("undefined"!==e&&"boolean"!==e&&!(O(t.left)&&O(t.top)&&O(t.bottom)&&O(t.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")})(c),e.autocenter&&function(){var t,e,o=0,i=0,a=M();a?(o=a.left,i=a.top,t=a.right-a.left,e=a.bottom-a.top):(t=r.clientWidth,e=r.clientHeight);var u=n.getBBox();if(0!==u.width&&0!==u.height){var f=e/u.height,c=t/u.width,l=Math.min(c,f);s.x=-(u.left+u.width/2)*l+t/2+o,s.y=-(u.top+u.height/2)*l+e/2+i,s.scale=l}}();var y,v,w,b,x,I,T,A=0,N=!1,_=!1;return b="smoothScroll"in e&&!e.smoothScroll?{start:F,stop:F,cancel:F}:function(t,e,n){"object"!=typeof n&&(n={});var r,o,i,a,s,u,f,c,l,h,d="number"==typeof n.minVelocity?n.minVelocity:5,p="number"==typeof n.amplitude?n.amplitude:.25;return{start:function(){r=t(),u=l=a=f=0,o=new Date,window.clearInterval(i),window.cancelAnimationFrame(h),i=window.setInterval(g,100)},stop:function(){window.clearInterval(i),window.cancelAnimationFrame(h);var e=t();s=e.x,c=e.y,o=Date.now(),(a<-d||a>d)&&(s+=u=p*a),(f<-d||f>d)&&(c+=l=p*f),h=window.requestAnimationFrame(m)},cancel:function(){window.clearInterval(i),window.cancelAnimationFrame(h)}};function g(){var e=Date.now(),n=e-o;o=e;var i=t(),s=i.x-r.x,u=i.y-r.y;r=i;var c=1e3/(1+n);a=.8*s*c+.2*a,f=.8*u*c+.2*f}function m(){var t=Date.now()-o,n=!1,r=0,i=0;u&&((r=-u*Math.exp(-t/342))>.5||r<-.5?n=!0:r=u=0),l&&((i=-l*Math.exp(-t/342))>.5||i<-.5?n=!0:i=l=0),n&&(e(s+r,c+i),h=window.requestAnimationFrame(m))}}((function(){return{x:s.x,y:s.y}}),(function(t,e){st(),L(t,e)}),e.smoothScroll),r.addEventListener("mousedown",J),r.addEventListener("dblclick",Z),r.addEventListener("touchstart",V),r.addEventListener("keydown",j),a.addWheelListener(r,nt),Y(),{dispose:function(){a.removeWheelListener(r,nt),r.removeEventListener("mousedown",J),r.removeEventListener("keydown",j),r.removeEventListener("dblclick",Z),u&&(window.cancelAnimationFrame(u),u=0),b.cancel(),tt(),et(),ct()},moveBy:X,moveTo:L,centerOn:function(t){var e=t.ownerSVGElement;if(!e)throw new Error("ui element is required to be within the scene");var n=t.getBoundingClientRect(),r=n.left+n.width/2,o=n.top+n.height/2,i=e.getBoundingClientRect();X(i.width/2-r,i.height/2-o,!0)},zoomTo:at,zoomAbs:D,getTransform:function(){return s},showRectangle:function(t){var e=B(r.clientWidth,r.clientHeight),n=t.right-t.left,o=t.bottom-t.top;if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Invalid rectangle");var i=e.x/n,a=e.y/o,u=Math.min(i,a);s.x=-(t.left+n/2)*u+e.x/2,s.y=-(t.top+o/2)*u+e.y/2,s.scale=u}};function B(t,e){if(n.getScreenCTM){var r=n.getScreenCTM(),i=r.a,a=r.d,s=r.e,u=r.f;o.x=t*i-s,o.y=e*a-u}else o.x=t,o.y=e;return o}function L(t,e){s.x=t,s.y=e,k(),lt("pan"),Y()}function P(t,e){L(s.x+t,s.y+e)}function k(){var t=M();if(t){var e,r,o,i,a=!1,u=(o=(e=n.getBBox()).left,i=e.top,{left:(r={x:o*s.scale+s.x,y:i*s.scale+s.y}).x,top:r.y,right:e.width*s.scale+r.x,bottom:e.height*s.scale+r.y}),f=t.left-u.right;return f>0&&(s.x+=f,a=!0),(f=t.right-u.left)<0&&(s.x+=f,a=!0),(f=t.top-u.bottom)>0&&(s.y+=f,a=!0),(f=t.bottom-u.top)<0&&(s.y+=f,a=!0),a}}function M(){if(c){if("boolean"==typeof c){var t=r.clientWidth,e=r.clientHeight;return{left:t*d,top:e*d,right:t*(1-d),bottom:e*(1-d)}}return c}}function Y(){i=!0,u=window.requestAnimationFrame(z)}function $(t,e,n){if(U(t)||U(e)||U(n))throw new Error("zoom requires valid numbers");var r=s.scale*n;if(r<h){if(s.scale===h)return;n=h/s.scale}if(r>l){if(s.scale===l)return;n=l/s.scale}var o=B(t,e);s.x=o.x-n*(o.x-s.x),s.y=o.y-n*(o.y-s.y),k()||(s.scale*=n),lt("zoom"),Y()}function D(t,e,n){$(t,e,n/s.scale)}function X(t,e,n){if(!n)return P(t,e);x&&x.cancel();var r=0,o=0;x=E({x:0,y:0},{x:t,y:e},{step:function(t){P(t.x-r,t.y-o),r=t.x,o=t.y}})}function z(){i&&(i=!1,n.applyTransform(s),lt("transform"),u=0)}function j(t){var e=0,n=0,o=0;if(38===t.keyCode?n=1:40===t.keyCode?n=-1:37===t.keyCode?e=1:39===t.keyCode?e=-1:189===t.keyCode||109===t.keyCode?o=1:187!==t.keyCode&&107!==t.keyCode||(o=-1),e||n){t.preventDefault(),t.stopPropagation();var i=r.getBoundingClientRect(),a=Math.min(i.width,i.height);X(.05*a*e,.05*a*n)}if(o){var s=ut(o);at(r.clientWidth/2,r.clientHeight/2,s)}}function V(t){if(function(t){e.onTouch&&!e.onTouch(t)||(t.stopPropagation(),t.preventDefault())}(t),1===t.touches.length)return function(t){var e=ot(t.touches[0],t.target);y=e.x,v=e.y,q()}(t,t.touches[0]);2===t.touches.length&&(w=H(t.touches[0],t.touches[1]),T=!0,q())}function q(){N||(N=!0,document.addEventListener("touchmove",W),document.addEventListener("touchend",G),document.addEventListener("touchcancel",G))}function W(t){if(1===t.touches.length){t.stopPropagation();var e=ot(t.touches[0],t.target),n=e.x-y,r=e.y-v;0!==n&&0!==r&&ft(),y=e.x,v=e.y;var o=B(n,r);X(o.x,o.y)}else if(2===t.touches.length){T=!0;var i=t.touches[0],a=t.touches[1],s=H(i,a),u=1;if(f)u=s/w;else{var c=0;s<w?c=1:s>w&&(c=-1),u=ut(c)}y=(i.clientX+a.clientX)/2,v=(i.clientY+a.clientY)/2,at(y,v,u),w=s,t.stopPropagation(),t.preventDefault()}}function G(t){if(t.touches.length>0){var e=ot(t.touches[0],t.target);y=e.x,v=e.y}else{var n=new Date;n-A<300&&it(y,v,p),A=n,N=!1,ct(),et()}}function H(t,e){return Math.sqrt((t.clientX-e.clientX)*(t.clientX-e.clientX)+(t.clientY-e.clientY)*(t.clientY-e.clientY))}function Z(t){var e=rt(t);it(e.x,e.y,p),t.preventDefault(),t.stopPropagation()}function J(t){if(N)return t.stopPropagation(),!1;if(1===t.button&&null!==window.event||0===t.button){var e=rt(t),n=B(e.x,e.y);return y=n.x,v=n.y,document.addEventListener("mousemove",K),document.addEventListener("mouseup",Q),R.capture(t.target||t.srcElement),!1}}function K(t){if(!N){ft();var e=rt(t),n=B(e.x,e.y),r=n.x-y,o=n.y-v;y=n.x,v=n.y,X(r,o)}}function Q(){R.release(),ct(),tt()}function tt(){document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",Q),_=!1}function et(){document.removeEventListener("touchmove",W),document.removeEventListener("touchend",G),document.removeEventListener("touchcancel",G),_=!1,T=!1}function nt(t){if(!g(t)){b.cancel();var e=ut(t.deltaY);if(1!==e){var n=rt(t);at(n.x,n.y,e),t.preventDefault()}}}function rt(t){var e=t.offsetX,n=t.offsetY;if(void 0===e){var r=t.target.getBoundingClientRect();e=t.clientX-r.left,n=t.clientY-r.top}return{x:e,y:n}}function ot(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function it(t,e,n){var r=s.scale,o={scale:r},i={scale:n*r};b.cancel(),st(),lt("zoom"),I=E(o,i,{step:function(n){D(t,e,n.scale)}})}function at(t,e,n){return b.cancel(),st(),$(t,e,n)}function st(){I&&(I.cancel(),I=null)}function ut(t){var e=1;return t>0?e=1-m:t<0&&(e=1+m),e}function ft(){_||(lt("panstart"),_=!0,b.start())}function ct(){_&&(T||b.stop(),lt("panend"))}function lt(e){var n=function(t){if(S){var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!0,!0,void 0),e}return new Event(t,{bubbles:!0})}(e);t.dispatchEvent(n)}};function F(){}function O(t){return Number.isFinite(t)}function U(t){return Number.isNaN?Number.isNaN(t):t!=t}var M=function(t,e,n){t=t||1,e=e||0,n=n||0,this._array=[t,0,0,0,0,t,0,0,0,0,1,0,e,n,0,1]},Y={scale:{},dx:{},dy:{}};M.prototype.multiply=function(t,e){var n=t.scale*e.scale,r=t.scale*e.dx+t.dx,o=t.scale*e.dy+t.dy;return this.scale=n,this.dx=r,this.dy=o,this},Y.scale.get=function(){return this._array[0]},Y.dx.get=function(){return this._array[12]},Y.dy.get=function(){return this._array[13]},Y.dx.set=function(t){this._array[12]=t},Y.dy.set=function(t){this._array[13]=t},Y.scale.set=function(t){this._array[0]=t,this._array[5]=t},M.prototype.copyTo=function(t){return function(t,e){if(t.length!==e.length)throw new Error("Array length mismatch");for(var n=0;n<t.length;++n)e[n]=t[n]}(this._array,t._array),this},M.prototype.getArray=function(){return this._array},Object.defineProperties(M.prototype,Y);var $=function(){this.children=[],this.transform=new M,this.worldTransform=new M,this.worldTransformNeedsUpdate=!0,this.type="Element",this.scene=null};$.prototype.appendChild=function(t,e){t.parent=this,e?this.children.unshift(t):this.children.push(t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()},$.prototype.bindScene=function(t){this.scene=t},$.prototype.traverse=function(t,e){t(this);for(var n=0;n<this.children.length;++n)this.children[n].traverse(t,e);e&&e(this)},$.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),this.scene&&this.scene.renderFrame()},$.prototype.updateWorldTransform=function(t){(this.worldTransformNeedsUpdate||t)&&(this.parent?this.worldTransform.multiply(this.parent.worldTransform,this.transform):this.transform.copyTo(this.worldTransform),this.worldTransformNeedsUpdate=!1,t=!0);for(var e=t,n=this.children,r=0;r<n.length;r++)e=n[r].updateWorldTransform(t)||e;return e},$.prototype.draw=function(t,e){for(var n=0;n<this.children.length;++n)this.children[n].draw(t,e)},$.prototype.dispose=function(){for(var t=0;t<this.children.length;++t)this.children[t].dispose()};function D(t,e){var n,r,o={width:0,height:0},i=window.devicePixelRatio;e||(e={});var a=e.wglContext,s=t.getContext("webgl",a)||t.getContext("experimental-webgl",a);s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND),s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT);var u=0,f=new $;g();var c,l=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:o}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var o=e[n],i=0;i<o.length;++i)o[i].callback===r&&o.splice(i,1);return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}({appendChild:function(t,e){f.appendChild(t,e)},getSceneCoordinate:w,getClientCoordinate:function(t,e){var n=f.transform;return{x:(t*n.scale+n.dx)/i,y:(e*n.scale+n.dy)/i}},getTransform:function(){return f.transform},getRoot:function(){return f},removeChild:function(t){f.removeChild(t)},setViewBox:function(t){d.showRectangle(t,{width:n,height:r});var e=d.getTransform();h.applyTransform(e)},setClearColor:function(t,e,n,r){s.clearColor(t,e,n,r)},dispose:function(){t.removeEventListener("mousemove",v),t.removeEventListener("transform",m),c&&c(),window.removeEventListener("resize",p,!0),d.dispose(),f.dispose(),u&&(cancelAnimationFrame(u),u=0)},renderFrame:b,getPixelRatio:function(){return i},setPixelRatio:function(t){i=t,g()}}),h=function(t,n,r){var o={applyTransform:function(t){var e=n.transform,o=r.getPixelRatio();e.dx=t.x*o,e.dy=t.y*o,e.scale=t.scale,n.worldTransformNeedsUpdate=!0,r.renderFrame()},getOwner:function(){return t}};return e.size&&(o.getScreenCTM=function(){return{a:e.size.width/t.offsetWidth,d:e.size.height/t.offsetHeight,e:0,f:0}}),o}(t,f,l),d=k(t,{zoomSpeed:.025,controller:h});return f.bindScene(l),function(){t.addEventListener("mousemove",v),t.addEventListener("transform",m),c=function(t,e,n){var r,o=new Date;return t.addEventListener("click",s),t.addEventListener("touchend",a),t.addEventListener("touchstart",i),function(){t.removeEventListener("click",s),t.removeEventListener("touchend",a),t.removeEventListener("touchstart",i)};function i(t){1===t.touches.length&&(o=new Date,r={x:t.touches[0].pageX,y:t.touches[0].pageY})}function a(t){if(!(t.touches.length>1||new Date-o>300)){var e=t.changedTouches[0],n=e.pageX-r.x,i=e.pageY-r.y;n*n+i*i<25&&s(e)}}function s(t){e.call(n,t)}}(t,y,this),window.addEventListener("resize",p,!0)}(),b(),l;function p(){g()}function g(){e.size?(n=t.width=e.size.width,r=t.height=e.size.height):(n=t.width=t.offsetWidth*i,r=t.height=t.offsetHeight*i),s.viewport(0,0,n,r),o.width=n,o.height=r,f.worldTransformNeedsUpdate=!0,b()}function m(t){l.fire("transform",t)}function y(t){var e=w(t.clientX,t.clientY);l.fire("click",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function v(t){var e=w(t.clientX,t.clientY);l.fire("mousemove",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function w(t,e){var n=f.transform,r=e*i;return{x:(t*i-n.dx)/n.scale,y:(r-n.dy)/n.scale}}function b(){u||(u=requestAnimationFrame(x))}function x(){s.clear(s.COLOR_BUFFER_BIT),o.wasDirty=f.updateWorldTransform(),f.draw(s,o),u=0}}var X={compile:function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r},link:function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(r));return r},getLocations:function(t,e){return{attributes:z(t,e),uniforms:j(t,e)}},getAttributes:z,getUniforms:j,initBuffer:function(t,e,n,r){var o=t.createBuffer();if(!o)throw new Error("Failed to create a buffer");t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(r,n,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)}};function z(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;++o){var i=t.getActiveAttrib(e,o).name;n[i]=t.getAttribLocation(e,i)}return n}function j(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<r;++o){var i=t.getActiveUniform(e,o).name;n[i]=t.getUniformLocation(e,i)}return n}var V=function(t){var e=[];return t.forEach((function(t){t.globals&&e.push(t.globals())})),e.push("void main() {"),t.forEach((function(t){t.mainBody&&e.push(t.mainBody())})),e.push("}"),e.join("\n")},q={globals:function(){return"\nattribute vec2 aPosition;\nuniform vec2 uScreenSize;\nuniform mat4 uTransform;\n"},mainBody:function(){return"\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n"}},W=V([q,{globals:function(){return"\nattribute float aPointSize;\nattribute vec4 aColor;\nvarying vec4 vColor;\n"},mainBody:function(){return"\n  gl_PointSize = aPointSize * transformed[0][0];\n  vColor = aColor;\n"}}]),G=new Map;function H(t,e,n,r,o){for(var i=0,a=0,s=t-n;s<t+n;++s)if(!(s<0||s>=o))for(var u=e-n;u<e+n;++u)u<0||u>=o||(i+=r[4*(s*o+u)+3],a+=1);return i/a}var Z=function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=void 0===r?1:r},J=function(t,e,n,r){this.offset=e,this.buffer=t,this.color=n||new Z(1,1,1,1),void 0!==r&&(this.data=r)},K={x:{},y:{}};K.x.get=function(){return this.buffer[this.offset]},K.y.get=function(){return this.buffer[this.offset+1]},J.prototype.update=function(t,e){var n=this.offset,r=this.buffer;r[n+0]=t.x,r[n+1]=t.y,(t.size||e)&&(r[n+2]="number"==typeof t.size?t.size:e.size),this.setColor(this.color)},J.prototype.setColor=function(t){this.color=t,this.buffer[this.offset+3]=t.r,this.buffer[this.offset+4]=t.g,this.buffer[this.offset+5]=t.b},Object.defineProperties(J.prototype,K);var Q=function(t){function e(e){t.call(this),this.type="PointCollection",this.pointsAccessor=[],this.capacity=e,this.pointsBuffer=new Float32Array(6*e),this.count=0,this._program=null,this.color=new Z(1,1,1,1),this.size=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=function(t,e){var n=G.get(t);if(!n){var r=X.compile(t,t.VERTEX_SHADER,W),o=X.compile(t,t.FRAGMENT_SHADER,"\nprecision highp float;\nvarying vec4 vColor;\nuniform sampler2D texture;\n\nvoid main() {\n  vec4 tColor = texture2D( texture, gl_PointCoord );\n  gl_FragColor = vec4(vColor.rgb, tColor.a);\n  //gl_FragColor = vec4(vColor.rgb, 1.0);\n  // vec2 t = 2.0 * gl_PointCoord - 1.0;\n  // float a = 1.0 - pow(t.x, 2.0) - pow(t.y, 2.0);\n  // gl_FragColor = vec4(vColor.rgb, a);\n}\n");n=X.link(t,r,o),G.set(t,n)}var i=X.getLocations(t,n),a=t.createBuffer();if(!a)throw new Error("failed to create a nodesBuffer");t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.DYNAMIC_DRAW);var s=function(t){var e=t.createTexture();if(!e)throw new Error("Failed to create circle texture");t.bindTexture(t.TEXTURE_2D,e);var n=function(t){for(var e=new Uint8Array(t*t*4),n=(t-8)/2,r=0;r<t;++r)for(var o=r*t,i=0;i<t;++i){var a=4*(o+i),s=r-n,u=i-n,f=Math.sqrt(u*u+s*s);if(f<n){var c=1-f/n;e[a+3]=c>.3?255:255*c}else e[a+3]=0}return function(t,e){for(var n=new Uint8Array(e*e*4),r=0;r<e;++r)for(var o=0;o<e;++o)n[4*(r*e+o)+3]=H(r,o,3,t,e);return n}(e,t)}(64);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,64,64,0,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),e}(t);return{draw:function(r,o,u){t.useProgram(n);var f=e.BYTES_PER_ELEMENT;r&&t.uniformMatrix4fv(i.uniforms.uTransform,!1,r.getArray()),t.uniform2f(i.uniforms.uScreenSize,o.width,o.height),t.bindTexture(t.TEXTURE_2D,s),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),t.vertexAttribPointer(i.attributes.aPosition,2,t.FLOAT,!1,6*f,0),t.enableVertexAttribArray(i.attributes.aPosition),t.vertexAttribPointer(i.attributes.aPointSize,1,t.FLOAT,!1,6*f,2*f),t.enableVertexAttribArray(i.attributes.aPointSize),t.vertexAttribPointer(i.attributes.aColor,3,t.FLOAT,!1,6*f,3*f),t.enableVertexAttribArray(i.attributes.aColor),t.drawArrays(t.POINTS,0,u)},updateData:function(t){e=t},dispose:function(){t.deleteProgram(n),t.deleteTexture(s),G.delete(t)}}}(t,this.pointsBuffer)),this._program.draw(this.worldTransform,e,this.count)},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype.add=function(t,e){if(!t)throw new Error("Point is required");this.count>=this.capacity&&this._extendArray();var n=this.pointsBuffer,r=this.count,o=new J(n,6*r,t.color||this.color,e);return this.pointsAccessor.push(o),o.update(t,this),this.count+=1,o},e.prototype._extendArray=function(){throw new Error("Cannot extend array at the moment :(")},e}($),tt=function(t,e,n){if(Number.isNaN(t))throw new Error("x is not a number");if(Number.isNaN(e))throw new Error("y is not a number");this.x=t,this.y=e,this.color=new Z(255,255,255),this.size=Number.isFinite(n)?n:4},et=function(t){function e(e,n){t.call(this),this.itemsPerLine=n,this.capacity=e,this.count=0,this._program=null,this.color=new Z(1,1,1,1),this.buffer=new Float32Array(e*this.itemsPerLine)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=this._makeProgram(t));var n=this.worldTransform;this._program.draw(n,this.color,e)},e.prototype._makeProgram=function(){throw new Error("Not implemented")},e.prototype._addInternal=function(){throw new Error("Not implemented")},e.prototype.add=function(t){if(!t)throw new Error("Line is required");this.count>=this.capacity&&this._extendArray();var e=this.count*this.itemsPerLine,n=this._addInternal(t,e);return this.count+=1,n},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype._extendArray=function(){var t=this.capacity*this.itemsPerLine*2,e=new Float32Array(t);this.buffer&&e.set(this.buffer),this.buffer=e,this.capacity=t},e}($),nt=V([q]),rt=new Map;function ot(t,e,n){var r=rt.get(t);if(!r){var o=X.compile(t,t.VERTEX_SHADER,nt),i=X.compile(t,t.FRAGMENT_SHADER,"\nprecision highp float;\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n");r=X.link(t,o,i),rt.set(t,r)}var a=X.getLocations(t,r),s=t.createBuffer(),u=e.BYTES_PER_ELEMENT,f=n?t.TRIANGLES:t.LINES;return t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.STATIC_DRAW),t.bufferSubData(t.ARRAY_BUFFER,0,e),{draw:function(n,o,i){0!==e.length&&(t.useProgram(r),t.uniformMatrix4fv(a.uniforms.uTransform,!1,n.getArray()),t.uniform2f(a.uniforms.uScreenSize,i.width,i.height),t.uniform4f(a.uniforms.uColor,o.r,o.g,o.b,o.a),t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(a.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(a.attributes.aPosition,2,t.FLOAT,!1,2*u,0),t.drawArrays(f,0,e.length/2))},dispose:function(){t.deleteBuffer(s),t.deleteProgram(r),rt.delete(t)}}}var it=function(t,e){this.offset=e,this.buffer=t,this.width=1};it.prototype.setWidth=function(t){this.width=t},it.prototype.update=function(t,e){var n=this.buffer,r=this.offset,o=e.x-t.x,i=e.y-t.y;0===o&&(o=1e-4),0===i&&(i=1e-4);var a=Math.sqrt(o*o+i*i),s=o/a,u=i/a,f=this.width,c=f*s,l=f*u,h=t.x+l,d=t.y-c,p=e.x+l,g=e.y-c,m=t.x-l,y=t.y+c,v=e.x-l,w=e.y+c;n[r+0]=h,n[r+1]=d,n[r+2]=p,n[r+3]=g,n[r+4]=m,n[r+5]=y,n[(r+=6)+0]=p,n[r+1]=g,n[r+2]=m,n[r+3]=y,n[r+4]=v,n[r+5]=w};var at=function(t){function e(e){t.call(this,e,12),this.type="LineCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return ot(t,this.buffer,!0)},e.prototype._addInternal=function(t,e){var n=new it(this.buffer,e);return n.update(t.from,t.to),n},e}(et),st=function(t,e){this.offset=e,this.buffer=t};st.prototype.update=function(t,e){var n=this.buffer,r=this.offset;n[r+0]=t.x,n[r+1]=t.y,n[r+2]=e.x,n[r+3]=e.y};var ut=function(t){function e(e){t.call(this,e,4),this.type="WireCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return ot(t,this.buffer,!1)},e.prototype._addInternal=function(t,e){var n=new st(this.buffer,e);return n.update(t.from,t.to),n},e}(et),ft=new Map;var ct=function(t){function e(e,n){void 0===n&&(n=!1),t.call(this),this.drawCount=0,this.madeFullCircle=!1,this.allowColors=n,this.itemsPerLine=n?3:2,this.capacity=e,this.nextElementIndex=1,this._program=null,this.color=new Z(1,1,1,1),this.buffer=new ArrayBuffer((e+1)*this.itemsPerLine*4),this.positions=new Float32Array(this.buffer),n&&(this.colors=new Uint32Array(this.buffer))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=function(t,e,n){var r=ft.get(t),o=n?3:2;if(!r){var i=function(t){return{lineVSSrc:V([{globals:function(){return"\n  attribute vec2 aPosition;\n  varying vec4 vColor;\n  "+(t?"attribute vec4 aColor;":"")+"\n  uniform vec4 uColor;\n  uniform vec2 uScreenSize;\n  uniform mat4 uTransform;\n"},mainBody:function(){return"\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition.xy/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n  vColor = "+(t?"aColor.abgr":"uColor")+";\n"}}]),lineFSSrc:"precision mediump float;\nvarying vec4 vColor;\nvoid main() {\n  gl_FragColor = vColor;\n}\n"}}(n),a=i.lineFSSrc,s=i.lineVSSrc,u=X.compile(t,t.VERTEX_SHADER,s),f=X.compile(t,t.FRAGMENT_SHADER,a);r=X.link(t,u,f),ft.set(t,r)}var c=X.getLocations(t,r),l=t.createBuffer();return{draw:function(i,a,s,u,f){if(0!==e.length){t.useProgram(r);var h=i.getArray();if(t.uniformMatrix4fv(c.uniforms.uTransform,!1,h),t.uniform2f(c.uniforms.uScreenSize,s.width,s.height),t.uniform4f(c.uniforms.uColor,a.r,a.g,a.b,a.a),t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(c.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),n?(t.vertexAttribPointer(c.attributes.aPosition,2,t.FLOAT,!1,12,0),t.enableVertexAttribArray(c.attributes.aColor),t.vertexAttribPointer(c.attributes.aColor,4,t.UNSIGNED_BYTE,!0,12,8)):t.vertexAttribPointer(c.attributes.aPosition,2,t.FLOAT,!1,0,0),f){var d=e.byteLength/4/o-u;t.drawArrays(t.LINE_STRIP,u,d),u>1&&t.drawArrays(t.LINE_STRIP,0,u-1)}else t.drawArrays(t.LINE_STRIP,1,u-1)}},dispose:function(){t.deleteBuffer(l),t.deleteProgram(r),ft.delete(t)}}}(t,this.buffer,this.allowColors));var n=this.worldTransform;this._program.draw(n,this.color,e,this.nextElementIndex,this.madeFullCircle)},e.prototype.add=function(t,e,n){var r=this.nextElementIndex*this.itemsPerLine,o=this.positions;o[r]=t,o[r+1]=e,this.allowColors&&(this.colors[r+2]=void 0===n?0:n),this.nextElementIndex+=1,this.drawCount+=1,this.nextElementIndex>this.capacity&&(this.nextElementIndex=1,o[0]=t,o[1]=e,this.allowColors&&(this.colors[2]=this.colors[r+2]),this.madeFullCircle=!0)},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e}($);function lt(t){try{return!(!window.WebGLRenderingContext||(t||(t=document.createElement("canvas")),!t.getContext("webgl")&&!t.getContext("experimental-webgl")))}catch(t){return!1}}},738:(t,e,n)=>{var r=n(590),o=n(236),i=new r,a=n(806),s=n(959);t.exports=function(){var t,e,n=new r,u={init:function(n){f(n),e=n,t=c(n);for(var r=0;r<n.length;r+=2)t.insert(r,e)},initAsync:function(n,r){f(n);var o=r&&r.done,i=r&&r.progress;t=c(n),e=n,s(n,(function(e,r){t.insert(r,n,0),i&&i(r,n.length)}),(function(){"function"==typeof o&&o(u)}),{step:2})},bounds:function(){return t?t.bounds:i},pointsAround:function(r,o,i,s){"function"!=typeof s&&(s=a);var u=[];return n.x=r,n.y=o,n.half=i,t.query(n,u,e,s),u},visit:function(e){return t.visit(e)}};return u;function f(t){if(!t)throw new Error("Points array is required for quadtree to work");if("number"!=typeof t.length)throw new Error("Points should be array-like object");if(t.length%2!=0)throw new Error("Points array should consist of series of x,y coordinates and be multiple of 2")}function c(t){if(0===t.length){var e=new r;return new o(e)}for(var n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0;u<t.length;u+=2){var f=t[u],c=t[u+1];f<n&&(n=f),f>a&&(a=f),c<i&&(i=c),c>s&&(s=c)}var l=Math.max(a-n,s-i),h=(l+=2)/2,d=new r((n-=1)+h,(i-=1)+h,h);return new o(d)}}},590:t=>{function e(t,e,n){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.half="number"==typeof n?n:0}t.exports=e,e.prototype.left=function(){return this.x-this.half},e.prototype.top=function(){return this.y-this.half},e.prototype.width=function(){return 2*this.half},e.prototype.height=function(){return 2*this.half},e.prototype.centerX=function(){return this.x},e.prototype.centerY=function(){return this.y},e.prototype.contains=function(t,e){var n=this.half;return this.x-n<=t&&t<this.x+n&&this.y-n<=e&&e<this.y+n}},806:t=>{t.exports=function(t,e){return t.x-t.half<e.x+e.half&&t.x+t.half>e.x-e.half&&t.y-t.half<e.y+e.half&&t.y+t.half>e.y-e.half}},236:(t,e,n)=>{var r=n(590);function o(t){this.bounds=t,this.nw=null,this.ne=null,this.sw=null,this.se=null,this.items=null}t.exports=o,o.prototype.subdivide=function(){var t=this.bounds,e=t.half/2;this.nw=new o(new r(t.x-e,t.y-e,e)),this.ne=new o(new r(t.x+e,t.y-e,e)),this.sw=new o(new r(t.x-e,t.y+e,e)),this.se=new o(new r(t.x+e,t.y+e,e))},o.prototype.insert=function(t,e,n){if(n||(n=0),!(n>24))if(null===this.nw){if(null===this.items?this.items=[t]:this.items.push(t),this.bounds.half>.1&&this.items.length>=4){this.subdivide();for(var r=0;r<this.items.length;++r)this.insert(this.items[r],e,n+1);this.items=null}}else{var o=e[t],i=e[t+1],a=this.bounds,s=0;o>a.x&&(s+=1),i>a.y&&(s+=2),function(t,e){return 0===e?t.nw:1===e?t.ne:2===e?t.sw:3===e?t.se:void 0}(this,s).insert(t,e,n+1)}},o.prototype.visit=function(t){t(this)&&this.nw&&(this.nw.visit(t),this.ne.visit(t),this.sw.visit(t),this.se.visit(t))},o.prototype.query=function(t,e,n,r){if(r(this.bounds,t)){var o=this.items;if(o)for(var i=0;i<o.length;++i){var a=o[i],s=n[a],u=n[a+1];t.contains(s,u)&&e.push(a)}this.nw&&(this.nw.query(t,e,n,r),this.ne.query(t,e,n,r),this.sw.query(t,e,n,r),this.se.query(t,e,n,r))}}},805:(t,e,n)=>{const r=n(901);t.exports=function(t,e,n){let o=r.aStar(n,{distance(t,e){let n=t.data.x-e.data.x,r=t.data.y-e.data.y;return Math.sqrt(n*n+r*r)},heuristic(t,e){let n=t.data.x-e.data.x,r=t.data.y-e.data.y;return Math.sqrt(n*n+r*r)}}).find(t,e),i=0;for(let t=0;t<o.length;t++){const e=o[t];if(t===o.length-1)break;const n=o[t+1];let r=(e.data.x-n.data.x)**2,a=(e.data.y-n.data.y)**2;i+=Math.sqrt(r+a)}return i}},508:t=>{t.exports=function(t){var e=[],n={},r={};for(let o=0;o<t.length;o++){let i=t[o];switch(o%4){case 0:n.x=i;break;case 1:n.y=i;break;case 2:r.x=i;break;case 3:r.y=i,e.push({from:n,to:r}),n={},r={}}}return e}},493:t=>{t.exports=function(t,e){var n;if(t.touches){let r=(t.changedTouches||t.touches)[0];n=e.getSceneCoordinate(r.clientX,r.clientY),r.identifier}else n=e.getSceneCoordinate(t.clientX,t.clientY);return n}},68:t=>{t.exports=function(t){let e=[];return t.forEachNode((function(t){e.push(t.data.x,t.data.y)})),e}},205:(t,e,n)=>{const r=n(738);t.exports=function(t){return hetTestTree=r(),hetTestTree.initAsync(t,{}),hetTestTree}},575:t=>{t.exports=function(t,e,n,r,o=.1,i=.1,a="yellow",s="circle"){g=document.getElementById(n);var u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("cx",t),u.setAttribute("cy",e),u.setAttribute("r",o),u.setAttribute("stroke","green"),u.setAttribute("stroke-width",""+i),u.setAttribute("fill",a),u.setAttribute("class",s),u.setAttribute("id","circle_"+r),g.appendChild(u)}},885:(t,e,n)=>{let r=n(964);class o extends r.Element{constructor(t,e){super(),this.g=t,this.dx=0,this.dy=0,this.scale=0,this.drawCallback=e||i}draw(){let t=this.worldTransform;if(n=this,(e=this.worldTransform).scale==n.scale&&e.dx===n.dx&&e.dy===n.dy)return;var e,n;let r=this.scene.getPixelRatio(),o=t.scale/r,i=t.dx/r,a=t.dy/r;this.g.setAttributeNS(null,"transform",`matrix(${o}, 0, 0, ${o}, ${i}, ${a})`),this.scale=t.scale,this.dx=t.dx,this.dy=t.dy,this.drawCallback(this)}}function i(){}t.exports=o},223:t=>{t.exports=function(t){var e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r.id)}return e}},330:(t,e,n)=>{const r=n(901),o=n(223);t.exports=function(t){let e=r.aStar(t),n=[],i={};t.forEachNode((function(t){n.push(t.id),i[t.id]={},i[t.id].found=0,i[t.id].x=t.data.x,i[t.id].y=t.data.y}));for(let t=0;t<n.length;t++){const r=n[t];for(let t=0;t<n.length;t++){const a=n[t];o(e.find(r,a)).forEach((t=>{i[t].found+=1}))}}return i}},296:t=>{t.exports=function(t,e,n,r,o=2e3){let i=n.pointsAround(t,e,o).map((t=>r[t/2]));return i.length>0?i[0]:null}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{n(508);const t=n(330),e=n(493),r=n(296),o=n(205),i=n(68),a=n(885),s=n(575);n(805);let u=n(736),f=n(964),c=u(),l=n(901),h=n(764).lW,d=n(24);$("#remove-marks-button").click((function(){$(".circle").remove()})),c.addNode("b",{x:0,y:0}),c.addNode("a",{x:3,y:-4}),c.addNode("c",{x:3,y:4}),c.addNode("d",{x:4,y:2}),c.addNode("e",{x:5,y:1}),c.addNode("f",{x:8,y:5}),c.addNode("g",{x:10,y:4}),c.addNode("i",{x:10,y:8}),c.addNode("h",{x:13,y:6}),c.addLink("a","b"),c.addLink("b","d"),c.addLink("b","c"),c.addLink("c","d"),c.addLink("d","e"),c.addLink("e","f"),c.addLink("f","g"),c.addLink("f","i"),c.addLink("g","i"),c.addLink("i","h"),c.addLink("g","h"),l.aStar(c,{distance:(t,e,n)=>1});var p=!1,g=!1,m=null,y=[],v=null,w=null,b=null,x=null;function E(t){t.scale}function I(e){var n=t(c);b=n;var r=null,o=null,i=null,a=Number.NEGATIVE_INFINITY;for(nodeId in n)n[nodeId].found>a&&(i=nodeId,r=n[nodeId].x,o=n[nodeId].y,a=n[nodeId].found);$("#selected-node").text(i),null==b&&(b=t(c));let u=c.getNode(i),f=b[u.id].found;$("#selected-node-betweenness").text(f),$("#selected-node-straightness-ceterality").text();let l=c.getNode(u.id).links.length;$("#selected-node-ceterality").text(l),s(r,o,"my_g",i,radius=.3,stroke=.1,color="black")}function T(n){!function(n){$("#actiavate-selecting-btn").prop("checked")&&(p=!0),$("#actiavate-adding-btn").prop("checked")&&(g=!0);let o=e(n,w);if(p){if(B(o.x,o.y),find=r(o.x,o.y,m,y,maxDistanceToExplore=1),find){$(".selected-circle").remove(),s(find.data.x,find.data.y,"my_g","1",.3,.1,"yellow","selected-circle"),find,$("#selected-node").text(find.id),null==b&&(b=t(c));let e=b[find.id].found;$("#selected-node-betweenness").text(e);let n=c.getNode(find.id).links.length;$("#selected-node-ceterality").text(n)}}else g&&(B(o.x,o.y),$(".added-circle").remove(),s(o.x,o.y,"my_g","1",.3,.1,"white","added-circle"),x=o)}(n)}function A(){w.removeChild(v),c.clear()}function N(t){let e=$("#add-node-input").val();void 0===c.getNode(e)?null==x?($("#notif-modalText").text("No node has selected on the canvas"),$("#notif-modalLabel").html("<span style='color:red'>error</span>"),$("#notif-modal").modal("show")):(c.addNode(e,{x:x.x,y:x.y}),s(x.x,x.y,"my_g","1",.3,.1,"#762938","graph-added-circle"),x=null,$(".added-circle").remove(),_()):($("#notif-modalText").text("The input name has existed in the graph"),$("#notif-modalLabel").html("<span style='color:red'>error</span>"),$("#notif-modal").modal("show"))}function S(){let t=$("#from-selection").val(),e=$("#to-selection").val(),n=c.getNode(t),r=c.getNode(e);if(void 0!==n&&void 0!==r){let r=n.links,o=!1;if(null!==r)for(let t=0;t<r.length;t++){const n=r[t];if(n.fromId==e||n.toId==e){o=!0;break}}o?($("#notif-modalText").text("The link has already existed"),$("#notif-modalLabel").html("<span style='color:red'>error</span>"),$("#notif-modal").modal("show")):(c.addLink(t,e),w.removeChild(v),v=new f.WireCollection(c.getLinksCount()),c.forEachLink((function(t){let e=c.getNode(t.fromId).data,n=c.getNode(t.toId).data;v.add({from:e,to:n})})),w.appendChild(v))}else $("#notif-modalText").text("There is no such nodes"),$("#notif-modalLabel").html("<span style='color:red'>error</span>"),$("#notif-modal").modal("show")}function _(){$("#to-selection,#from-selection").empty(),$("#to-selection").append("<option selected disabled>To</option>"),$("#from-selection").append("<option selected disabled>From</option>"),c.forEachNode((t=>{$("#to-selection,#from-selection").append(`<option>${t.id}</option>`)}))}function B(t,e){t=Math.round(100*t)/100,e=Math.round(100*e)/100,$("#selected-node-x").text(t),$("#selected-node-y").text(e)}!function(){let t=document.getElementById("canvas-id");(w=f.scene(t)).setClearColor(16/255,16/255,16/255,1),w.setClearColor(1,1,1,1),w.setViewBox({left:-10,top:-10,right:10,bottom:10}),w.setPixelRatio(2),svgConntainerWays=new a(document.getElementsByTagName("svg")[0].querySelector(".scene"),E),w.appendChild(svgConntainerWays),v=new f.WireCollection(c.getLinksCount()),c.forEachLink((function(t){let e=c.getNode(t.fromId).data,n=c.getNode(t.toId).data;v.add({from:e,to:n})})),_(),c.forEachNode((function(t){y.push(t)})),v.color={r:244/255,g:250/255,b:230/255,a:1},w.setClearColor(.2,.2,.2,1),w.appendChild(v),allPoint=i(c),m=o(allPoint),$("#canvas-id").click(T),document.getElementById("canvas-id").addEventListener("touchmove",T),$("#find-best-betweenness").click(I),$("#reset-graph").click(A),$("#add-node-button").click(N),$("#add-link-button").click(S)}(),newGraph=d("./graphs/New"),newGraph.then((t=>{setTimeout((()=>{c.forEachNode((t=>{console.log(t)}))}),1500),console.log(t.graph)})),$("#upload-graph-input").change((t=>{var e=new FormData,n=document.getElementById("upload-graph-input").files[0];n&&e.append("upload-graph-input",n),$.ajax({url:"/src/DownloadGraphs.php",type:"POST",processData:!1,contentType:!1,dataType:"json",data:e,success:function(t){$("#graph-name-input").val()},error:function(t){console.log(t)}})})),$("#download-graph-button").click((t=>{let e=$("#graph-name-input").val(),n=new Map;!function(t,e,n){var r=e.getNodesCount(),o=(h.alloc(4*r*2),0);let i=[];e.forEachNode((t=>{n.set(t.id,1+o/8);let e={x:t.data.x,y:t.data.y,id:t.id};i.push(e)})),$.ajax({type:"POST",url:"/src/SaveGraph.php",data:{data:i,type:"nodes",file_name:t},dataType:"json",success:function(t){$("#notif-modalLabel").empty(),$("#notif-modalLabel").append("Results"),$("#notif-modalText").empty(),$("#notif-modalText").append(t.message)},error:function(t){console.log(t.responseText)}})}(e,c,n),function(t,e,n){h.alloc(4*e.getLinksCount()*2);let r=[];e.forEachLink((t=>{let e={from:t.fromId,to:t.toId};r.push(e)})),$.ajax({type:"POST",url:"/src/SaveGraph.php",data:{data:r,type:"links",file_name:t},dataType:"json",success:function(t){$("#notif-modalText").append("<br>"+t.message),$("#notif-modal").modal("show")},error:function(t){console.log(t.responseText)}})}(e,c)}))})()})();